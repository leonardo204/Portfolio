# Wandery

🌐 **Language**: [한국어](./README.md) | [English](./README_EN.md)

> 여행 사진을 타임라인으로, AI가 스토리로

![Platform](https://img.shields.io/badge/platform-iOS-lightgrey)
![Swift](https://img.shields.io/badge/Swift-5.9-orange)
![iOS](https://img.shields.io/badge/iOS-17.0+-blue)

---

## 개요

**Wandery**는 여행 사진의 GPS와 시간 정보를 분석하여 자동으로 타임라인을 생성하고, AI가 여행 스토리를 작성해주는 iOS 앱입니다. 서버 없이 100% 온디바이스로 동작하며, 로그인 없이 바로 사용할 수 있습니다.

---

## 주요 기능

### 자동 타임라인 생성
사진을 선택하면 GPS 좌표와 촬영 시간을 분석하여 방문 장소와 이동 경로를 자동으로 파악합니다. DBSCAN 밀도 기반 클러스터링과 H3 헥사곤 그리드로 정확한 장소 분류를 수행합니다.

### Wander Intelligence (스마트 분석)
온디바이스 AI가 사진을 다각도로 분석합니다:
- **Vision 장면 분류** - Apple Vision Framework 기반 장면 인식
- **Travel DNA** - 나만의 여행자 성향 분석
- **Context 분류** - 일상 / 외출 / 여행 자동 구분
- **인사이트 발견** - 3-Layer 아키텍처 (단건 분석 → 기록 비교 → AI 확장)
- **장소 자동 학습** - 자주 가는 곳(집/회사/학교) 자동 감지
- **재방문 감지** - H3 동네 수준 매칭으로 재방문 장소 알림

### AI 다듬기
규칙 기반 스마트 분석 결과를 내장 Google Gemini AI가 자연스럽게 다듬어줍니다. 제목, 스토리, 인사이트, Travel DNA 설명까지 한 번에 완성합니다.

### 지도 시각화
방문한 장소들을 지도 위에 표시하고, 이동 동선을 한눈에 확인할 수 있습니다.

### 공유 & 내보내기
글래스모피즘 스타일의 공유 카드를 생성하거나, P2P(CloudKit)로 다른 사용자에게 여행 기록을 직접 공유할 수 있습니다. Markdown/이미지 내보내기도 지원합니다.

### 홈화면 위젯
- **오늘의 추억** - N년 전 오늘의 기록
- **최근 기록** - 가장 최근 여행
- **여행 통계** - 누적 기록 요약

Small / Medium / 잠금화면 위젯을 지원합니다.

---

## 스크린샷

<p align="center">
  <img src="./images/01_home_main.png" width="200" />
  <img src="./images/02_photo_select.png" width="200" />
  <img src="./images/03_record_detail.png" width="200" />
</p>
<p align="center">
  <img src="./images/04_map_route.png" width="200" />
  <img src="./images/05_share_card.png" width="200" />
  <img src="./images/06_widget.png" width="200" />
</p>

---

## 특징

| | |
|---|---|
| **100% 온디바이스** | 서버 없이 모든 분석이 기기에서 처리됩니다 |
| **로그인 불필요** | 회원가입, 로그인 없이 바로 사용 |
| **무료** | AI 다듬기 일 3회 무료, 리워드 광고로 추가 사용 가능 |
| **프라이버시** | 사진은 기기를 떠나지 않습니다 |
| **iPhone 전용** | iPhone에 최적화된 UI/UX |

---

## 부가 기능

- **지금 뭐해?** - 최근 24시간 사진 + 카메라 촬영으로 퀵 분석
- **주간 하이라이트** - 이번 주 사진 자동 요약
- **돌아보기** - H3 장소 그룹핑 + 스와이프 드래그 선택
- **통계 대시보드** - 기록/거리/장소 집계, DNA 분포, 월별 차트
- **보안 잠금** - PIN 또는 Face ID로 앱 보호
- **카테고리 분류** - 여행, 일상, 출장 등으로 기록 정리
- **자주 가는 곳** - 사용자 정의 장소 등록 및 관리

---

## 기술 스택

| 분류 | 기술 |
|------|------|
| **Language** | Swift 5.9 |
| **UI Framework** | SwiftUI |
| **Data** | SwiftData |
| **Architecture** | MVVM |
| **Clustering** | DBSCAN |
| **Spatial Indexing** | SwiftyH3 (Uber H3) |
| **AI** | Google Gemini |
| **Minimum OS** | iOS 17+ |
| **Device** | iPhone |
| **Frameworks** | PhotoKit, CoreLocation, MapKit, Vision, CloudKit |

---

## 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                     Wandery App                          │
│                                                          │
│  ┌───────────────┐  ┌───────────────┐  ┌─────────────┐ │
│  │   Photo Pick   │  │  Quick Snap   │  │   Widget    │ │
│  │  (PhotoKit)    │  │  (Camera)     │  │ (WidgetKit) │ │
│  └───────┬───────┘  └───────┬───────┘  └─────────────┘ │
│          │                  │                            │
│          ▼                  ▼                            │
│  ┌──────────────────────────────────────────────────┐   │
│  │              Analysis Pipeline                    │   │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────────────┐ │   │
│  │  │  EXIF    │ │  DBSCAN  │ │  H3 Hexagon     │ │   │
│  │  │  Parser  │ │ Cluster  │ │  Grid Indexing  │ │   │
│  │  └────┬─────┘ └────┬─────┘ └────────┬─────────┘ │   │
│  │       └─────────────┼───────────────┘            │   │
│  │                     ▼                             │   │
│  │  ┌──────────────────────────────────────────┐    │   │
│  │  │         Wander Intelligence              │    │   │
│  │  │  Vision Scene · Travel DNA · Context     │    │   │
│  │  │  Insights · Place Learning · Revisit     │    │   │
│  │  └──────────────────┬───────────────────────┘    │   │
│  └─────────────────────┼────────────────────────────┘   │
│                        ▼                                 │
│  ┌──────────────────────────────────────────────────┐   │
│  │              AI Polish (Gemini)                   │   │
│  │  Title · Story · Insights · Travel DNA            │   │
│  └──────────────────────────────────────────────────┘   │
│                        │                                 │
│          ┌─────────────┼─────────────┐                  │
│          ▼             ▼             ▼                  │
│  ┌────────────┐ ┌────────────┐ ┌──────────────┐        │
│  │  Timeline  │ │  Map View  │ │  Share Card  │        │
│  │  (SwiftUI) │ │  (MapKit)  │ │  (CloudKit)  │        │
│  └────────────┘ └────────────┘ └──────────────┘        │
│                                                          │
│  ┌──────────────────────────────────────────────────┐   │
│  │              SwiftData Storage                    │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

---

## 개발 과정에서의 도전과 해결

### 1. GPS 기반 장소 클러스터링
**도전**: 대량의 사진 GPS 데이터에서 의미 있는 장소를 자동으로 분류해야 했습니다.

**해결**: DBSCAN 밀도 기반 클러스터링과 Uber H3 헥사곤 그리드를 결합하여, 노이즈에 강하고 정확한 장소 분류를 구현했습니다.

### 2. 온디바이스 AI 분석
**도전**: 서버 없이 기기에서만 사진 분석과 스토리 생성을 처리해야 했습니다.

**해결**: Apple Vision Framework로 장면 분류를 수행하고, 3-Layer 아키텍처(단건 분석 → 기록 비교 → AI 확장)로 단계적 인사이트를 생성한 뒤, Gemini AI로 자연스럽게 다듬는 파이프라인을 설계했습니다.

### 3. 재방문 장소 감지
**도전**: 이전 여행 기록과 비교하여 재방문 장소를 효율적으로 감지해야 했습니다.

**해결**: H3 동네 수준 매칭을 활용하여 정확한 좌표 일치 없이도 동일 지역 재방문을 감지하는 시스템을 구현했습니다.

### 4. P2P 공유
**도전**: 서버 없이 사용자 간 여행 기록 공유 기능이 필요했습니다.

**해결**: CloudKit의 P2P 기능을 활용하여 서버리스 환경에서도 안전하게 여행 기록을 공유할 수 있도록 구현했습니다.

---

## 역할 및 기여

- iOS 앱 전체 아키텍처 설계 및 개발
- DBSCAN + H3 기반 장소 클러스터링 엔진 구현
- Wander Intelligence 온디바이스 분석 시스템 설계
- Google Gemini AI 연동 및 스토리 생성 파이프라인 구현
- MapKit 기반 지도 시각화 및 경로 표시
- 글래스모피즘 공유 카드 UI 디자인 및 구현
- WidgetKit 기반 홈화면 위젯 개발
- SwiftData 데이터 모델 설계

---

## 관련 링크

- **App Store**: [Wandery](https://apps.apple.com/kr/app/wandery/id6759185541)
- **GitHub**: [leonardo204/Wander](https://github.com/leonardo204/Wander)

---

*이 프로젝트는 여행 기록을 더 쉽고 의미 있게 만들기 위해 개발된 iOS 앱입니다.*
