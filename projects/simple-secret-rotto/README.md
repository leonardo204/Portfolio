# SimpleSecretRotto (행운로또)

🌐 **Language**: [한국어](./README.md) | [English](./README_EN.md)

> AI 기반 로또 번호 분석 및 추천 앱

![Platform](https://img.shields.io/badge/platform-iOS%20%7C%20iPadOS%20%7C%20macOS%20%7C%20visionOS-lightgrey)
![Swift](https://img.shields.io/badge/Swift-5.9-orange)
![SwiftUI](https://img.shields.io/badge/SwiftUI-blue)
![App Store](https://img.shields.io/badge/App%20Store-Available-blue)

<a href="https://apps.apple.com/kr/app/simplesecretrotto/id6740446215">
  <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store" height="50">
</a>

---

## 개요

**SimpleSecretRotto(행운로또)**는 AI 알고리즘을 활용하여 로또 당첨 번호를 분석하고 매주 행운의 번호를 추천하는 iOS 앱입니다. 빅데이터 기반 트렌드 분석과 패턴 시각화를 통해 번호별 출현 빈도, 확률 분석, 최신 트렌드를 제공하며, 이를 기반으로 가중치가 적용된 번호 조합을 생성합니다.

사용자의 선호 번호와 AI 추천을 스마트하게 결합하여 직관적인 UI로 로또 번호 선택에 참고할 수 있는 인사이트를 제공합니다. iOS, iPadOS, macOS(Apple Silicon), visionOS를 지원합니다.

---

## 주요 기능

### 당첨 번호 분석
- **최신 당첨 번호 조회**: 실시간으로 최신 로또 당첨 번호 확인
- **당첨 통계**: 회차별 당첨 번호 이력 및 통계 제공
- **번호별 출현 빈도**: 각 번호의 역대 출현 횟수 분석

### 확률 기반 추천
- **가중치 적용 추천**: 출현 빈도와 최신 트렌드를 반영한 번호 생성
- **지수 함수 기반 트렌드 분석**: 최근 회차에 가중치를 더 부여
- **애니메이션 번호 생성**: 스프링 애니메이션과 함께 추천 번호 표시

### 데이터 시각화
- **확률 차트**: 번호별 출현 확률을 차트로 시각화
- **빈도 분석 리스트**: 가장 많이/적게 출현한 번호 순위
- **당첨 통계 뷰**: 종합적인 당첨 패턴 분석

### 사용자 설정
- **행운의 숫자 설정**: 사용자 선호 번호 저장 및 AI 추천과 결합
- **행운 번호 히스토리**: 생성된 번호 이력 조회
- **주간 당첨 통계**: 매주 당첨 현황 통계 제공
- **오프라인 모드 지원**: 네트워크 연결 없이도 캐시된 데이터 활용
- **자동 데이터 동기화**: 앱 활성화 시 최신 데이터 자동 업데이트

---

## 스크린샷

> 스크린샷 추가 예정

<!--
### 홈 화면
![홈 화면](./images/home.png)

### 통계 분석
![통계 분석](./images/statistics.png)

### 번호 추천
![번호 추천](./images/recommendation.png)
-->

---

## 기술 스택

| 분류 | 기술 |
|------|------|
| **Language** | Swift 5.9 (100%) |
| **UI Framework** | SwiftUI |
| **Architecture** | MVVM |
| **Networking** | URLSession |
| **Data Persistence** | UserDefaults, Cache |
| **Backend** | REST API (Private Server) |

---

## 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                     SimpleSecretRotto App                        │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                      Views Layer                            │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────────┐    │ │
│  │  │  HomeView    │ │AnalysisView │ │  SettingsView    │    │ │
│  │  └──────────────┘ └──────────────┘ └──────────────────┘    │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────────┐    │ │
│  │  │LatestNumbers │ │WinningStats │ │ProbabilityChart  │    │ │
│  │  │    View      │ │    View     │ │     View         │    │ │
│  │  └──────────────┘ └──────────────┘ └──────────────────┘    │ │
│  │  ┌──────────────┐ ┌──────────────┐                         │ │
│  │  │ LottoBall    │ │FrequentNums │                         │ │
│  │  │    View      │ │  ListView   │                         │ │
│  │  └──────────────┘ └──────────────┘                         │ │
│  └────────────────────────────────────────────────────────────┘ │
│                              │                                   │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                    Services Layer                           │ │
│  │  ┌─────────────────────┐  ┌─────────────────────────────┐  │ │
│  │  │    APIService       │  │     LottoDataService        │  │ │
│  │  │  - Health Check     │  │  - Fetch Draw History       │  │ │
│  │  │  - Get Draws        │  │  - Generate Numbers         │  │ │
│  │  │  - Get Statistics   │  │  - Frequency Analysis       │  │ │
│  │  │  - Post Numbers     │  │  - Trend Weighting          │  │ │
│  │  └─────────────────────┘  │  - Queue Management         │  │ │
│  │                           │  - Offline Handling         │  │ │
│  │                           └─────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                              │                                   │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                    Models Layer                             │ │
│  │  ┌─────────────────────────────────────────────────────┐   │ │
│  │  │                   LottoDraw                          │   │ │
│  │  │  - Draw Number, Date, Winning Numbers, Bonus        │   │ │
│  │  └─────────────────────────────────────────────────────┘   │ │
│  └────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                 ┌─────────────────────────┐
                 │    REST API Server      │
                 │   (Private Backend)     │
                 └─────────────────────────┘
```

---

## 주요 기능 상세

### 번호 생성 알고리즘
```
가중치 = 기본 빈도 가중치 × 최신 트렌드 가중치

최신 트렌드 가중치 = exp(-λ × 회차_차이)
```

- 과거 모든 당첨 번호의 출현 빈도를 기반으로 기본 가중치 계산
- 최근 회차에 더 높은 가중치를 부여하는 지수 함수 적용
- 가중치 기반 랜덤 샘플링으로 6개 번호 선택

### 오프라인 지원
- 마지막 동기화 데이터를 로컬에 캐싱
- 네트워크 연결 실패 시 자동으로 오프라인 모드 전환
- 30분 간격으로 재연결 시도
- 연결 복구 시 자동 데이터 동기화

### 스케줄링 시스템
- 매일 23:50에 배치 전송 스케줄링
- 서버 헬스 체크를 통한 자동 복구
- 태스크 취소 지원으로 메모리 관리 최적화

---

## 개발 과정에서의 도전과 해결

### 1. 통계 기반 번호 생성 알고리즘
**도전**: 단순 랜덤이 아닌, 과거 데이터에 기반한 의미 있는 번호 추천 시스템이 필요했습니다.

**해결**: 출현 빈도와 최신 트렌드를 결합한 가중치 알고리즘을 설계했습니다. 지수 함수를 활용하여 최근 회차에 더 높은 가중치를 부여하고, 이를 기반으로 확률적 샘플링을 수행합니다.

### 2. 오프라인 모드 및 데이터 동기화
**도전**: 네트워크 연결이 불안정한 상황에서도 앱이 정상 동작해야 했습니다.

**해결**: 이중 큐 시스템(기본 큐 + 재시도 큐)을 구현하여 전송 실패한 데이터를 관리하고, 자동 재시도 스케줄링으로 데이터 손실을 방지했습니다.

### 3. 실시간 데이터 갱신
**도전**: 앱이 백그라운드에서 포그라운드로 돌아올 때 최신 데이터를 자동으로 반영해야 했습니다.

**해결**: SwiftUI의 `scenePhase`를 활용하여 앱 생명주기를 모니터링하고, 포그라운드 전환 시 자동으로 데이터를 새로고침하도록 구현했습니다.

---

## 역할 및 기여

- iOS 앱 전체 아키텍처 설계 (MVVM)
- SwiftUI 기반 UI/UX 구현
- 통계 기반 번호 생성 알고리즘 개발
- REST API 연동 및 네트워크 레이어 구현
- 오프라인 모드 및 캐싱 시스템 개발
- 데이터 동기화 및 스케줄링 시스템 구현

---

## 시스템 요구사항

| 항목 | 요구사항 |
|------|---------|
| **iOS** | iOS 17.6 이상 |
| **iPadOS** | iPadOS 17.6 이상 |
| **macOS** | macOS 14.0 이상 (Apple Silicon) |
| **visionOS** | visionOS 1.0 이상 |
| **개발 환경** | Xcode 15.0+ |
| **언어** | Swift 5.9 |

---

## 관련 링크

- **App Store**: [SimpleSecretRotto - 행운로또](https://apps.apple.com/kr/app/simplesecretrotto/id6740446215)
- **GitHub**: [leonardo204/SimpleSecretRotto](https://github.com/leonardo204/SimpleSecretRotto)

---

*이 프로젝트는 AI 기반 로또 번호 분석 및 추천을 위한 개인 프로젝트입니다.*
