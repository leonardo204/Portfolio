# blackRadio

> watchOS 한국 라디오 스트리밍 앱

![Platform](https://img.shields.io/badge/platform-watchOS-lightgrey)
![Swift](https://img.shields.io/badge/Swift-5.9-orange)
![SwiftUI](https://img.shields.io/badge/SwiftUI-blue)

---

## 개요

**blackRadio**는 Apple Watch에서 한국 주요 라디오 방송을 청취할 수 있는 watchOS 네이티브 앱입니다. KBS, MBC, SBS의 주요 라디오 채널을 지원하며, 현재 방송 중인 프로그램 정보와 썸네일을 실시간으로 표시합니다.

iPhone 없이도 Apple Watch와 AirPods만으로 언제 어디서나 라디오를 청취할 수 있으며, 워치페이스 컴플리케이션을 통해 빠르게 앱에 접근할 수 있습니다.

---

## 주요 기능

### 라디오 채널 지원
- **KBS**: KBS 1라디오, Happy FM, Classic FM, Cool FM
- **MBC**: FM4U, 표준FM
- **SBS**: Power FM, Love FM

### 실시간 프로그램 정보
- **현재 방송 표시**: 실시간으로 현재 방송 중인 프로그램 정보 제공
- **썸네일 이미지**: 프로그램 이미지를 함께 표시
- **자동 업데이트**: 프로그램 변경 시 자동으로 정보 갱신

### watchOS 최적화 UI
- **직관적인 채널 선택**: 스크롤 가능한 채널 버튼 목록
- **Marquee 텍스트**: 긴 프로그램 제목도 스크롤 애니메이션으로 표시
- **볼륨 컨트롤**: Digital Crown 연동 볼륨 조절
- **컴플리케이션**: 워치페이스에서 바로 앱 실행

### 오디오 스트리밍
- **백그라운드 재생**: 앱을 종료해도 재생 지속
- **스트림 관리**: 안정적인 스트리밍 연결 유지

---

## 스크린샷

> 스크린샷 추가 예정

<!--
### 채널 선택 화면
![채널 선택](./images/channel-select.png)

### 재생 화면
![재생 화면](./images/now-playing.png)
-->

---

## 기술 스택

| 분류 | 기술 |
|------|------|
| **Language** | Swift 5.9 (100%) |
| **UI Framework** | SwiftUI |
| **Platform** | watchOS |
| **Audio** | AVFoundation |
| **Architecture** | MVVM |
| **API Integration** | URLSession, JSON/JSONP Parsing |

---

## 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                      blackRadio Watch App                        │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                      Views Layer                            │ │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐  │ │
│  │  │ ContentView  │  │ PlayingView  │  │   VolumeView     │  │ │
│  │  │ (채널 선택)   │  │  (재생 화면)  │  │  (볼륨 조절)     │  │ │
│  │  └──────────────┘  └──────────────┘  └──────────────────┘  │ │
│  │  ┌──────────────────────────────────────────────────────┐  │ │
│  │  │              MarqueeText (스크롤 텍스트)               │  │ │
│  │  └──────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                              │                                   │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                    Manager Layer                            │ │
│  │  ┌──────────────────┐  ┌──────────────┐  ┌──────────────┐  │ │
│  │  │  ProgramManager  │  │ StreamManager│  │ AudioPlayer  │  │ │
│  │  │  - KBS 메타데이터 │  │ - 스트림 연결 │  │ - 오디오 재생 │  │ │
│  │  │  - MBC 메타데이터 │  │ - 연결 관리   │  │ - 볼륨 제어   │  │ │
│  │  │  - SBS 메타데이터 │  │              │  │ - 백그라운드  │  │ │
│  │  └──────────────────┘  └──────────────┘  └──────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                              │                                   │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                   Utilities & Models                        │ │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐  │ │
│  │  │ ProgramInfo  │  │  LogUtils    │  │ SwiftUI+Extension│  │ │
│  │  │   (Model)    │  │   (로깅)     │  │    (확장)        │  │ │
│  │  └──────────────┘  └──────────────┘  └──────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
│                              │                                   │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                   Watch Extension                           │ │
│  │  ┌──────────────────────────────────────────────────────┐  │ │
│  │  │        ComplicationController (워치페이스 연동)        │  │ │
│  │  └──────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
              ┌───────────────────────────────┐
              │   Broadcasting APIs           │
              │   (KBS / MBC / SBS)           │
              │   - Program Metadata          │
              │   - Audio Stream              │
              └───────────────────────────────┘
```

---

## 주요 컴포넌트

### ProgramManager
각 방송사별 API를 호출하여 현재 방송 중인 프로그램의 메타데이터(제목, 썸네일)를 가져옵니다.
- KBS/MBC: JSONP 형식 파싱
- SBS: JSON 형식 파싱
- 시간 기반 프로그램 매칭

### AudioPlayer
오디오 스트리밍을 담당하며, watchOS 환경에 최적화된 재생 기능을 제공합니다.
- AVFoundation 기반 오디오 재생
- 백그라운드 재생 지원
- 스트림 연결 상태 관리

### MarqueeText
watchOS의 작은 화면에서 긴 프로그램 제목을 표시하기 위한 커스텀 스크롤 텍스트 컴포넌트입니다.

---

## 개발 과정에서의 도전과 해결

### 1. watchOS 오디오 스트리밍
**도전**: watchOS의 제한된 리소스 환경에서 안정적인 오디오 스트리밍이 필요했습니다.

**해결**: AVFoundation의 스트리밍 기능을 활용하고, 연결 상태를 모니터링하여 끊김 발생 시 자동으로 재연결하는 로직을 구현했습니다.

### 2. 방송사별 API 통합
**도전**: KBS, MBC, SBS 각각 다른 API 형식(JSON, JSONP)을 사용하여 통합 처리가 필요했습니다.

**해결**: ProgramManager에서 방송사별 파싱 로직을 분리하고, 공통 인터페이스(ProgramInfo)로 데이터를 표준화했습니다.

### 3. 작은 화면 UI 최적화
**도전**: Apple Watch의 작은 화면에서 프로그램 정보를 효과적으로 표시해야 했습니다.

**해결**: MarqueeText 컴포넌트를 개발하여 긴 텍스트도 스크롤 애니메이션으로 전체 내용을 확인할 수 있도록 했습니다.

---

## 역할 및 기여

- watchOS 앱 전체 아키텍처 설계 및 구현
- SwiftUI 기반 watchOS UI 개발
- 오디오 스트리밍 엔진 구현
- 방송사별 API 연동 및 메타데이터 파싱
- 워치페이스 컴플리케이션 개발
- MarqueeText 커스텀 컴포넌트 개발

---

## 시스템 요구사항

| 항목 | 요구사항 |
|------|---------|
| **watchOS** | watchOS 9.0 이상 |
| **개발 환경** | Xcode 15.0+ |
| **언어** | Swift 5.9 |

---

## 관련 링크

- **GitHub**: [leonardo204/blackRadio_watchOS](https://github.com/leonardo204/blackRadio_watchOS)

---

*이 프로젝트는 Apple Watch에서 한국 라디오를 청취하기 위한 개인 프로젝트입니다.*
